@layer components {
  .root {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-style: solid;

    /* VARIABLES FROM THEME - DONT CHANGE WITH REACT PROPS */
    border-width: var(--components-dimensions-button-border-width-secondary);
    transition-property: all;
    transition-duration: var(--duration-medium);
    outline: transparent solid var(--components-dimensions-button-border-width-ai);
    font-weight: var(--font-weight-semi-bold);

    /* VARIABLES THAT CHANGE WITH REACT PROPS */
    aspect-ratio: var(--aspectRatio, auto);
    height: var(--height);
    padding-inline: var(--paddingInline);
    border-radius: var(--borderRadius);
    font-size: var(--fontSize);
    color: var(--color, var(--components-colors-button-color-background-primary-neutral-focused));
    background-color: var(--backgroundColor);
    border-color: var(--borderColor);
    line-height: var(--lineHeight);

    &[data-focus-visible],
    &:focus-visible {
      outline-color: var(--outlineColorFocus);
    }

    @media (hover: hover) and (pointer: fine) {
      &:hover {
        background-color: var(--backgroundColorHover);
        border-color: var(--borderColorHover);
      }
    }

    &:active {
      background-color: var(--backgroundColorActive);
      border-color: var(--borderColorActive);
    }

    &:disabled,
    &[aria-disabled] {
      background-color: var(--backgroundColorDisabled);
      border-color: var(--borderColorDisabled);
      color: var(--colorDisabled);
      cursor: var(--cursorDisabled);
    }

    &:has(:global(i.wui-icon-font)),
    &:has(svg) {
      /* when button has icon(s) we reduce horizontal padding */
      padding-inline: var(--paddingInlineHasIcon);
    }

    /* CHILDREN */

    :global(i.wui-icon-font),
    svg {
      font-weight: initial;

      &:only-child {
        width: var(--iconOnlySize);
        height: var(--iconOnlySize);
        font-size: var(--iconOnlySize);
      }

      &:not(:only-child) {
        width: var(--iconDefaultSize);
        height: var(--iconDefaultSize);
        font-size: var(--iconDefaultSize);
      }

      &:first-child:not(:only-child) {
        margin-inline-end: var(--components-dimensions-button-padding-block-sm);
      }

      &:last-child:not(:only-child) {
        margin-inline-start: var(--components-dimensions-button-padding-block-sm);
      }
    }
  }

  .shape {
    &-default {
      --borderRadius: var(--components-dimensions-button-padding-block-sm);
    }

    &-circle {
      /* width: var(--height); */
      --borderRadius: var(--border-radius-full);
    }

    &-square {
      --borderRadius: var(--components-dimensions-button-padding-block-sm);
    }

    /* compouned variant equivalent for size + shape */
    &-circle.size,
    &-square.size {
      &-lg,
      &-md,
      &-sm,
      &-xs {
        --aspectRatio: 1;
        --paddingInline: 0;
        --paddingInlineHasIcon: 0;
      }

      &-lg {
        --fontSize: var(--components-dimensions-button-size-icon-lg);
      }

      &-md {
        --fontSize: var(--components-dimensions-button-padding-inline-lg);
      }

      &-sm {
        --fontSize: var(--components-dimensions-button-padding-inline-lg);
      }

      &-xs {
        --fontSize: var(--components-dimensions-button-padding-inline-lg);
      }
    }
  }

  .size {
    &-xs {
      --fontSize: var(--components-dimensions-button-padding-inline-md);
      --height: var(--components-dimensions-button-size-icon-lg);
      --paddingInline: var(--components-dimensions-button-padding-inline-sm);
      --paddingInlineHasIcon: var(--components-dimensions-button-padding-inline-sm);
      --iconDefaultSize: 0.75rem; /* 12px */
      --iconOnlySize: 1rem; /* 16px */
      --lineHeight: var(--font-size-sm);
    }

    &-sm {
      --fontSize: var(--components-dimensions-button-padding-inline-md);
      --height: var(--size-icon-2xl);
      --paddingInline: var(--components-dimensions-button-padding-inline-sm);
      --paddingInlineHasIcon: var(--components-dimensions-button-padding-inline-md);
      --iconDefaultSize: 1rem; /* 16px */
      --iconOnlySize: 1rem; /* 16px */
      --lineHeight: var(--font-size-sm);
    }

    &-md {
      --fontSize: var(--font-size-14);
      --height: var(--height-40);
      --paddingInline: var(--components-dimensions-button-size-icon-lg);
      --paddingInlineHasIcon: var(--components-dimensions-button-padding-inline-md);
      --iconDefaultSize: 1rem; /* 16px */
      --iconOnlySize: 1rem; /* 16px */
      --lineHeight: var(--font-size-lg);
    }

    &-lg {
      --fontSize: var(--font-size-14);
      --height: var(--size-icon-3xl);
      --paddingInline: var(--components-dimensions-button-size-icon-lg);
      --paddingInlineHasIcon: var(--components-dimensions-button-padding-inline-lg);
      --iconDefaultSize: 1rem; /* 16px */
      --iconOnlySize: 1.5rem; /* 24px */
      --lineHeight: var(--font-size-lg);
    }
  }

  .variant {
    &-disabled {
      --backgroundColorDisabled: var(--color-background-warm-stronger);
      --borderColorDisabled: var(--color-background-warm-stronger);
      --colorDisabled: var(--color-icon-warm-tertiary);
      --cursorDisabled: not-allowed;
      --outlineColorFocus: var(--color-background-warm-minimal);
    }

    &-ghost {
      --backgroundColorActive: color-mix(
        in oklab,
        var(--components-colors-button-color-background-primary-neutral-focused) 40%,
        transparent
      );
      --backgroundColorHover: color-mix(
        in oklab,
        var(--components-colors-button-color-background-primary-neutral-focused) 10%,
        transparent
      );
      --borderColor: transparent;
      --borderColorActive: transparent;
      --borderColorHover: transparent;
      --outlineColorFocus: color-mix(
        in oklab,
        var(--components-colors-button-color-background-primary-neutral-focused) 10%,
        transparent
      );
    }

    &-ghost-ai {
      --backgroundColorActive: var(--color-background-accent-violet-secondary);
      --backgroundColorHover: var(--color-violet-10);
      --borderColor: transparent;
      --borderColorActive: var(--color-background-accent-violet-secondary);
      --borderColorHover: var(--color-violet-10);
      --color: var(--color-violet-70);
      --outlineColorFocus: var(--color-violet-50);
    }

    &-ghost-danger {
      --backgroundColorActive: var(
        --components-colors-button-color-background-tertiary-danger-pressed
      );
      --backgroundColorHover: var(
        --components-colors-button-color-background-secondary-danger-pressed
      );
      --borderColor: transparent;
      --borderColorActive: var(--components-colors-button-color-background-tertiary-danger-pressed);
      --borderColorHover: var(--components-colors-button-color-background-secondary-danger-pressed);
      --color: var(--components-colors-button-color-icon-secondary-danger-focused);
      --outlineColorFocus: var(--color-background-danger-primary);
    }

    &-primary {
      --backgroundColor: var(--components-colors-button-color-background-primary-main-focused);
      --backgroundColorActive: var(--color-background-brand-minimal);
      --backgroundColorHover: var(--components-colors-button-color-background-primary-main-pressed);
      --borderColor: var(--components-colors-button-color-background-primary-main-focused);
      --borderColorActive: var(--color-background-brand-minimal);
      --borderColorHover: var(--components-colors-button-color-background-primary-main-pressed);
      --outlineColorFocus: var(--color-background-brand-subtle);
    }

    &-primary-ai {
      --backgroundColor: var(--color-violet-70);
      --backgroundColorActive: var(--color-background-accent-violet-primary);
      --backgroundColorHover: var(--color-violet-60);
      --borderColor: var(--color-violet-70);
      --borderColorActive: var(--color-background-accent-violet-primary);
      --borderColorHover: var(--color-violet-60);
      --color: var(--components-colors-button-color-background-secondary-danger-focused);
      --outlineColorFocus: var(--color-violet-50);
    }

    &-primary-danger {
      --backgroundColor: var(--components-colors-button-color-background-primary-danger-focused);
      --backgroundColorActive: var(
        --components-colors-button-color-background-primary-danger-pressed
      );
      --backgroundColorHover: var(--components-colors-button-color-background-primary-danger-hover);
      --borderColor: var(--components-colors-button-color-background-primary-danger-focused);
      --borderColorActive: var(--components-colors-button-color-background-primary-danger-pressed);
      --borderColorHover: var(--components-colors-button-color-background-primary-danger-hover);
      --color: var(--components-colors-button-color-background-secondary-danger-focused);
      --outlineColorFocus: var(--color-background-danger-primary);
    }

    &-secondary {
      --backgroundColor: var(--components-colors-button-color-background-primary-neutral-focused);
      --backgroundColorActive: var(--components-colors-button-color-icon-secondary-danger-disabled);
      --backgroundColorHover: var(
        --components-colors-button-color-background-primary-neutral-pressed
      );
      --borderColor: var(--components-colors-button-color-background-primary-neutral-focused);
      --borderColorActive: var(--components-colors-button-color-icon-secondary-danger-disabled);
      --borderColorHover: var(--components-colors-button-color-background-primary-neutral-pressed);
      --color: var(--components-colors-button-color-background-secondary-danger-focused);
      --outlineColorFocus: var(--components-colors-button-color-border-secondary-main-hover);
    }

    &-tertiary {
      --backgroundColor: var(--components-colors-button-color-background-secondary-danger-focused);
      --backgroundColorActive: color-mix(
        in oklab,
        var(--components-colors-button-color-background-primary-neutral-focused) 40%,
        transparent
      );
      --backgroundColorHover: color-mix(
        in oklab,
        var(--components-colors-button-color-background-primary-neutral-focused) 10%,
        transparent
      );
      --borderColor: var(--components-colors-button-color-background-primary-neutral-focused);
      --outlineColorFocus: var(--components-colors-button-color-border-secondary-main-hover);
    }

    &-tertiary-ai {
      --backgroundColor: var(--components-colors-button-color-background-secondary-danger-focused);
      --backgroundColorActive: var(--color-background-accent-violet-secondary);
      --backgroundColorHover: var(--color-violet-10);
      --borderColor: var(--color-violet-70);
      --color: var(--color-violet-70);
      --outlineColorFocus: var(--color-violet-50);
    }

    &-tertiary-danger {
      --backgroundColor: var(--components-colors-button-color-background-secondary-danger-focused);
      --backgroundColorActive: var(
        --components-colors-button-color-background-tertiary-danger-pressed
      );
      --backgroundColorHover: var(
        --components-colors-button-color-background-secondary-danger-pressed
      );
      --borderColor: var(--components-colors-button-color-icon-secondary-danger-focused);
      --color: var(--components-colors-button-color-icon-secondary-danger-focused);
      --outlineColorFocus: var(--color-background-danger-primary);
    }
  }

  .loader {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    top: 0;
  }

  .loader-children {
    opacity: 0;
  }
}
