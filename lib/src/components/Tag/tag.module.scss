/* REMOVE THIS STYLELINT DISABLE COMMENT WHEN THIS TAG WILL BE MIGRATED TO BELONGING DESIGN */
/* stylelint-disable custom/valid-theme-token */
@property --gradient-angle {
  syntax: '<angle>';
  initial-value: -60deg;
  inherits: true;
}

@function ai-gradient-border-background($background-color) {
  @return linear-gradient($background-color 0 0) padding-box,
    linear-gradient(white 0 0) padding-box,
    conic-gradient(
        from var(--gradient-angle) at 50% 50%,
        var(--color-green-30),
        var(--color-teal-40),
        var(--color-blue-40),
        var(--color-violet-40),
        var(--color-pink-40),
        var(--color-red-orange-40),
        var(--color-pink-40),
        var(--color-violet-40),
        var(--color-blue-40),
        var(--color-teal-40),
        var(--color-green-30)
      )
      border-box;
}

@function striped-background($background-color) {
  @return repeating-linear-gradient(
        -45deg,
        transparent,
        transparent 2.4px,
        color-mix(in srgb, var(--color-neutral-50) 12%, transparent) 2.4px,
        color-mix(in srgb, var(--color-neutral-50) 12%, transparent) 4.3px
      ),
    $background-color
}

@layer components {
  .root {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    transition: background-color var(--duration-medium) var(--timing-primary);
    font-weight: var(--font-weight-medium);
    line-height: initial;
    font-size: var(--font-size-sm);
    border-radius: var(--components-dimensions-tag-border-radius);
    border-color: var(--components-colors-tag-color-border-default);
    border-width: var(--components-dimensions-tag-border-width-default);
    border-style: solid;

    /* VARIABLES THAT CHANGE WITH REACT PROPS */
    background: var(--backgroundColor);
    box-shadow: var(--boxShadow, var(--elevation-10));
    color: var(--color);
    height: var(--height);
    padding: var(--paddingVertical) var(--paddingHorizontal);
    gap: var(--gap);

    /* Text overflow for children */
    > span,
    > p {
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Icon sizing */
    > svg {
      flex-shrink: 0;
      width: var(--components-dimensions-tag-size-icon);
      height: var(--components-dimensions-tag-size-icon);
    }
  }

  /* Interactive states for button and anchor tags */
  button.root,
  a.root {
    cursor: pointer;
    text-decoration: none;

    @media (hover: hover) and (pointer: fine) {
      &:hover:not(.disabled) {
        --backgroundColor: var(--backgroundColorHover);
        --boxShadow: var(--elevation-20);
      }

      &.variant-dash:hover:not(.disabled) {
        border-color: var(--components-colors-tag-color-border-dash-hover);
      }
    }
  }

  .disabled {
    background: var(--backgroundColorDisabled);
    border: none;
    cursor: inherit;
    --boxShadow: none;
    --color: var(--colorDisabled) !important;

    &.ai {
      border: inherit
    }

    .removeButton {
      cursor: inherit;
    }
  }

  .variant {
    &-brand {
      --backgroundColor: var(--components-colors-tag-color-background-brand-default);
      --backgroundColorHover: var(--components-colors-tag-color-background-brand-hover);
      --backgroundColorDisabled: #{striped-background(var(--components-colors-tag-color-background-brand-disabled))};
      --color: var(--components-colors-tag-color-text-brand-default);
      --colorDisabled: var(--components-colors-tag-color-text-brand-disabled);

      &.ai {
        border-width: 1px;
        border-color: transparent;
        box-shadow: inset 0 0 0 2px white;
        --backgroundColor: #{ai-gradient-border-background(var(--components-colors-tag-color-background-brand-ai-default))};
        --backgroundColorHover: #{ai-gradient-border-background(var(--components-colors-tag-color-background-brand-ai-hover))};
        --backgroundColorDisabled: #{striped-background(ai-gradient-border-background(var(--components-colors-tag-color-background-brand-ai-disabled)))};
      }
    }

    &-warm {
      --backgroundColor: var(--components-colors-tag-color-background-warm-default);
      --backgroundColorHover: var(--components-colors-tag-color-background-warm-hover);
      --backgroundColorDisabled: #{striped-background(var(--components-colors-tag-color-background-warm-disabled))};
      --color: var(--components-colors-tag-color-text-warm-default);
      --colorDisabled: var(--components-colors-tag-color-text-warm-disabled);

      &.ai {
        border-width: 1px;
        border-color: transparent;
        box-shadow: inset 0 0 0 2px white;
        --backgroundColor: #{ai-gradient-border-background(var(--components-colors-tag-color-background-warm-ai-default))};
        --backgroundColorHover: #{ai-gradient-border-background(var(--components-colors-tag-color-background-warm-ai-hover))};
        --backgroundColorDisabled: #{striped-background(ai-gradient-border-background(var(--components-colors-tag-color-background-warm-ai-disabled)))};
      }
    }

    &-red {
      --backgroundColor: var(--components-colors-tag-color-background-red-default);
      --backgroundColorHover: var(--components-colors-tag-color-background-red-hover);
      --backgroundColorDisabled: #{striped-background(var(--components-colors-tag-color-background-red-disabled))};
      --color: var(--components-colors-tag-color-text-red-default);
      --colorDisabled: var(--components-colors-tag-color-text-red-disabled);

      &.ai {
        border-width: 1px;
        border-color: transparent;
        box-shadow: inset 0 0 0 2px white;
        --backgroundColor: #{ai-gradient-border-background(var(--components-colors-tag-color-background-red-ai-default))};
        --backgroundColorHover: #{ai-gradient-border-background(var(--components-colors-tag-color-background-red-ai-hover))};
        --backgroundColorDisabled: #{striped-background(ai-gradient-border-background(var(--components-colors-tag-color-background-red-ai-disabled)))};
      }
    }

    &-blue {
      --backgroundColor: var(--components-colors-tag-color-background-blue-default);
      --backgroundColorHover: var(--components-colors-tag-color-background-blue-hover);
      --backgroundColorDisabled: #{striped-background(var(--components-colors-tag-color-background-blue-disabled))};
      --color: var(--components-colors-tag-color-text-blue-default);
      --colorDisabled: var(--components-colors-tag-color-text-blue-disabled);

      &.ai {
        border-width: 1px;
        border-color: transparent;
        box-shadow: inset 0 0 0 2px white;
        --backgroundColor: #{ai-gradient-border-background(var(--components-colors-tag-color-background-blue-ai-default))};
        --backgroundColorHover: #{ai-gradient-border-background(var(--components-colors-tag-color-background-blue-ai-hover))};
        --backgroundColorDisabled: #{striped-background(ai-gradient-border-background(var(--components-colors-tag-color-background-blue-ai-disabled)))};
      }
    }

    &-green {
      --backgroundColor: var(--components-colors-tag-color-background-green-default);
      --backgroundColorHover: var(--components-colors-tag-color-background-green-hover);
      --backgroundColorDisabled: #{striped-background(var(--components-colors-tag-color-background-green-disabled))};
      --color: var(--components-colors-tag-color-text-green-default);
      --colorDisabled: var(--components-colors-tag-color-text-green-disabled);

      &.ai {
        border-width: 1px;
        border-color: transparent;
        box-shadow: inset 0 0 0 2px white;
        --backgroundColor: #{ai-gradient-border-background(var(--components-colors-tag-color-background-green-ai-default))};
        --backgroundColorHover: #{ai-gradient-border-background(var(--components-colors-tag-color-background-green-ai-hover))};
        --backgroundColorDisabled: #{striped-background(ai-gradient-border-background(var(--components-colors-tag-color-background-green-ai-disabled)))};
      }
    }

    &-orange {
      --backgroundColor: var(--components-colors-tag-color-background-orange-default);
      --backgroundColorHover: var(--components-colors-tag-color-background-orange-hover);
      --backgroundColorDisabled: #{striped-background(var(--components-colors-tag-color-background-orange-disabled))};
      --color: var(--components-colors-tag-color-text-orange-default);
      --colorDisabled: var(--components-colors-tag-color-text-orange-disabled);

      &.ai {
        border-width: 1px;
        border-color: transparent;
        box-shadow: inset 0 0 0 2px white;
        --backgroundColor: #{ai-gradient-border-background(var(--components-colors-tag-color-background-orange-ai-default))};
        --backgroundColorHover: #{ai-gradient-border-background(var(--components-colors-tag-color-background-orange-ai-hover))};
        --backgroundColorDisabled: #{striped-background(ai-gradient-border-background(var(--components-colors-tag-color-background-orange-ai-disabled)))};
      }
    }

    &-pink {
      --backgroundColor: var(--components-colors-tag-color-background-pink-default);
      --backgroundColorHover: var(--components-colors-tag-color-background-pink-hover);
      --backgroundColorDisabled: #{striped-background(var(--components-colors-tag-color-background-pink-disabled))};
      --color: var(--components-colors-tag-color-text-pink-default);
      --colorDisabled: var(--components-colors-tag-color-text-pink-disabled);

      &.ai {
        border-width: 1px;
        border-color: transparent;
        box-shadow: inset 0 0 0 2px white;
        --backgroundColor: #{ai-gradient-border-background(var(--components-colors-tag-color-background-pink-ai-default))};
        --backgroundColorHover: #{ai-gradient-border-background(var(--components-colors-tag-color-background-pink-ai-hover))};
        --backgroundColorDisabled: #{striped-background(ai-gradient-border-background(var(--components-colors-tag-color-background-pink-ai-disabled)))};
      }
    }

    &-teal {
      --backgroundColor: var(--components-colors-tag-color-background-teal-default);
      --backgroundColorHover: var(--components-colors-tag-color-background-teal-hover);
      --backgroundColorDisabled: #{striped-background(var(--components-colors-tag-color-background-teal-disabled))};
      --color: var(--components-colors-tag-color-text-teal-default);
      --colorDisabled: var(--components-colors-tag-color-text-teal-disabled);

      &.ai {
        border-width: 1px;
        border-color: transparent;
        box-shadow: inset 0 0 0 2px white;
        --backgroundColor: #{ai-gradient-border-background(var(--components-colors-tag-color-background-teal-ai-default))};
        --backgroundColorHover: #{ai-gradient-border-background(var(--components-colors-tag-color-background-teal-ai-hover))};
        --backgroundColorDisabled: #{striped-background(ai-gradient-border-background(var(--components-colors-tag-color-background-teal-ai-disabled)))};
      }
    }

    &-violet {
      --backgroundColor: var(--components-colors-tag-color-background-violet-default);
      --backgroundColorHover: var(--components-colors-tag-color-background-violet-hover);
      --backgroundColorDisabled: #{striped-background(var(--components-colors-tag-color-background-violet-disabled))};
      --color: var(--components-colors-tag-color-text-violet-default);
      --colorDisabled: var(--components-colors-tag-color-text-violet-disabled);

      &.ai {
        border-width: 1px;
        border-color: transparent;
        box-shadow: inset 0 0 0 2px white;
        --backgroundColor: #{ai-gradient-border-background(var(--components-colors-tag-color-background-violet-ai-default))};
        --backgroundColorHover: #{ai-gradient-border-background(var(--components-colors-tag-color-background-violet-ai-hover))};
        --backgroundColorDisabled: #{striped-background(ai-gradient-border-background(var(--components-colors-tag-color-background-violet-ai-disabled)))};
      }
    }

    &-dash {
      --backgroundColor: var(--components-colors-tag-color-background-dash-default);
      --backgroundColorHover: var(--components-colors-tag-color-background-dash-hover);
      --backgroundColorDisabled: #{striped-background(var(--components-colors-tag-color-background-dash-disabled))};
      --color: var(--components-colors-tag-color-text-dash-default);
      --colorDisabled: var(--components-colors-tag-color-text-dash-disabled);
      border: var(--components-dimensions-tag-border-width-default) dashed var(--components-colors-tag-color-border-dash-default);
      position: relative;

      &:hover {
        box-shadow: none;
      }

      &.disabled {
        border-color: var(--components-colors-tag-color-border-dash-disabled);
      }
    }
  }

  .size {
    &-md {
      --height: var(--components-dimensions-tag-size-max-height-md);
      --maxHeight: var(--components-dimensions-tag-size-max-height-md);
      --paddingVertical: var(--components-dimensions-tag-padding-block-md);
      --paddingHorizontal: var(--components-dimensions-tag-padding-inline-md);
      --gap: var(--components-dimensions-tag-padding-inline-md);
    }

    &-lg {
      --height: var(--components-dimensions-tag-size-max-height-lg);
      --maxHeight: var(--components-dimensions-tag-size-max-height-lg);
      --paddingVertical: var(--components-dimensions-tag-padding-block-lg);
      --paddingHorizontal: var(--components-dimensions-tag-padding-inline-lg);
      --gap: var(--components-dimensions-tag-gap-content);
    }
  }

  .hasRemoveAction {
    align-items: center;
    display: inline-flex;
    flex-direction: row;
    gap: var(--components-dimensions-tag-padding-block-md);
  }
  
  .isSquare {
    flex-basis: var(--height);
    justify-content: center;
    padding: 0;
  }
  
  .removeButton {
    cursor: pointer;
    flex-shrink: 0;
    --paddingInlineHasIcon: 0;
  }
}
